<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Packages on The Emacs Cat</title>
    <link>http://localhost:1313/tags/packages/</link>
    <description>Recent content in Packages on The Emacs Cat</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 03 Sep 2022 01:46:36 +0300</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/packages/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Reverso Context in Emacs</title>
      <link>http://localhost:1313/post/reverso-context-in-emacs/</link>
      <pubDate>Sat, 03 Sep 2022 01:46:36 +0300</pubDate>
      <guid>http://localhost:1313/post/reverso-context-in-emacs/</guid>
      <description>&lt;p&gt;If you are an emacser, you are probably already following the &lt;a href=&#34;https://sachachua.com/blog/&#34;&gt;Sacha&#xA;Chua&amp;rsquo;s blog&lt;/a&gt;. If you are not, you should.&#xA;Sacha maintains an incredible blog on Emacs-related news, upcoming&#xA;events, Org Mode, configuration, new packages, and many other things&#xA;from the Emacs world.&lt;/p&gt;&#xA;&lt;p&gt;English is not my native language so I need &lt;em&gt;the right tools&lt;/em&gt; to&#xA;improve my language skills. My favorite tool is the&#xA;&lt;a href=&#34;https://www.reverso.net/text-translation&#34;&gt;Reverso&lt;/a&gt; web service, an&#xA;AI-powered service for translation, grammar check, context, and&#xA;synonyms search.&lt;/p&gt;&#xA;&lt;p&gt;Of course, I&amp;rsquo;d prefer to use it in Emacs directly, and in&#xA;&lt;a href=&#34;https://sachachua.com/blog/2022/08/2022-08-29-emacs-news/&#34;&gt;one&lt;/a&gt; of&#xA;the latest Sacha&amp;rsquo;s posts I found what I had been searching for -&#xA;&lt;a href=&#34;https://github.com/SqrtMinusOne/reverso.el&#34;&gt;reverso.el&lt;/a&gt;.&lt;/p&gt;&#xA;&lt;p&gt;At the time of writing, the package isnâ€™t yet available anywhere but&#xA;in the author&amp;rsquo;s GitHub repository, so as a first step you need either&#xA;to download or to clone this package to your box.&lt;/p&gt;&#xA;&lt;p&gt;I&amp;rsquo;ve cloned it to my &lt;code&gt;~/emacs.d/extras/&lt;/code&gt;.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone https://github.com/SqrtMinusOne/reverso.el.git&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Secondly, you need to add this directory to your &lt;code&gt;load-path&lt;/code&gt; and&#xA;&lt;code&gt;require&lt;/code&gt; the package.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-elisp&#34; data-lang=&#34;elisp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(add-to-list &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;load-path&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;~/.emacs.d/extras/reverso.el/&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Almost done.&lt;/p&gt;&#xA;&lt;p&gt;Because I&amp;rsquo;m using Reverso quite often, I decided to implement a&#xA;&lt;em&gt;smart&lt;/em&gt; start-up function and to bind it to a &lt;em&gt;common&lt;/em&gt; key like&#xA;&lt;code&gt;&amp;lt;F9&amp;gt;&lt;/code&gt;. I want to distinguish between the &lt;em&gt;Translation&lt;/em&gt; (applied to a&#xA;single word) and the &lt;em&gt;Context&lt;/em&gt; (applied to a phrase or a sentence)&#xA;features of Reverso. So now if you press &lt;code&gt;&amp;lt;F9&amp;gt;&lt;/code&gt; &lt;em&gt;and&lt;/em&gt; there is some&#xA;region selected (active, in terminology of Emacs), &lt;code&gt;reverso-context&lt;/code&gt;&#xA;is called, else, if no region selected, &lt;code&gt;reverso-translate&lt;/code&gt; is&#xA;called for a word under the cursor.&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-elisp&#34; data-lang=&#34;elisp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;;; Reverso context&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;;; https://github.com/SqrtMinusOne/reverso.el&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(require &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;reverso&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(defun avs/reverso ()&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Calls &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`reverso&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; functions depending on selection.&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;If a region (selection) is active, calls &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`reverso-context&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;otherwise calls &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`reverso-translate&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; for a word under the cursor.&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (interactive)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  (if (region-active-p)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;;; Region is active, use context.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      (reverso-context)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;;; Region is not active, get word coordinates...&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    (let ((bounds (bounds-of-thing-at-point &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;word&lt;/span&gt;))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          (p (&lt;span style=&#34;color:#a6e22e&#34;&gt;point&lt;/span&gt;))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      (if bounds&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          (progn&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;;; ...select the word under cursor...&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (&lt;span style=&#34;color:#a6e22e&#34;&gt;goto-char&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;car&lt;/span&gt; bounds))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (set-mark-command &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (&lt;span style=&#34;color:#a6e22e&#34;&gt;goto-char&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;cdr&lt;/span&gt; bounds))&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;;; ...and translate it.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (reverso-translate)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;;; Then back to the initial position.&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (deactivate-mark)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            (&lt;span style=&#34;color:#a6e22e&#34;&gt;goto-char&lt;/span&gt; p)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;No word under cursor!&amp;#34;&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  )&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(global-set-key [(f9)] &lt;span style=&#34;color:#a6e22e&#34;&gt;#&amp;#39;&lt;/span&gt;avs/reverso)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;figure&gt;&lt;img src=&#34;http://localhost:1313/img/reverso-translate.png&#34;/&gt;&lt;figcaption&gt;&#xA;            &lt;h4&gt;The word &amp;#39;deposed&amp;#39; is under the cursor, no region is active, &amp;lt;F9&amp;gt; calls `reverso-translate&amp;#39;.&lt;/h4&gt;&#xA;        &lt;/figcaption&gt;&#xA;&lt;/figure&gt;&#xA;&#xA;&lt;figure&gt;&lt;img src=&#34;http://localhost:1313/img/reverso-context.png&#34;/&gt;&lt;figcaption&gt;&#xA;            &lt;h4&gt;The region &amp;#39;different kind of weather&amp;#39; is active, &amp;lt;F9&amp;gt; calls `reverso-context&amp;#39;&lt;/h4&gt;&#xA;        &lt;/figcaption&gt;&#xA;&lt;/figure&gt;&#xA;&#xA;&lt;p&gt;Many thanks to &lt;a href=&#34;https://github.com/SqrtMinusOne&#34;&gt;Pavel Korytov&lt;/a&gt; for&#xA;the excellent packages, and, indeed, to &lt;a href=&#34;https://sachachua.com/blog/contact/&#34;&gt;Sacha&#xA;Chua&lt;/a&gt; for pointing it out to all of us.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
