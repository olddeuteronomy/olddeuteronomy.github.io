<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Config - The Emacs Cat</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Config" />
<meta property="og:description" content="Various notes on Emacs and beyond" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://olddeuteronomy.github.io/tags/config/" />


		<meta itemprop="name" content="Config">
<meta itemprop="description" content="Various notes on Emacs and beyond">
		<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Config"/>
<meta name="twitter:description" content="Various notes on Emacs and beyond"/>

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="alternate" type="application/rss+xml" href="/tags/config/index.xml" title="The Emacs Cat">

	<link rel="shortcut icon" href="/favicon.ico">
        
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="The Emacs Cat" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/od.png">
				</div><div class="logo__item logo__text">
					<div class="logo__title">The Emacs Cat</div>
					<div class="logo__tagline">An Emacser&#39;s Miscellany</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">Config</h1>
	</header><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/post/cpp-programming-in-emacs/" rel="bookmark">
			C&#43;&#43; Programming in Emacs
			</a>
		</h2>
		<p class="list__lead post__lead">Making a lightweight and fast C&#43;&#43; IDE in Emacs</p>
		<div class="list__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">The Emacs Cat</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2025-02-22T10:36:27&#43;01:00">Saturday, Feb 22, 2025</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/2025/" rel="category">2025</a>
	</span>
</div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		<p>C++ is my primary programming language since &ndash; I can&rsquo;t believe it
myself &ndash; 1991 (yes, it was Turbo C++). As I&rsquo;m going to do almost
everything within Emacs 29.4 now &ndash; no doubt I want to have the C++ IDE in
Emacs, in the same way I&rsquo;m using Emacs as the
<a href="https://olddeuteronomy.github.io/post/python-programming-in-emacs/">Python IDE</a>.</p>
<p>Thankfully, <a href="https://github.com/joaotavora/eglot">eglot</a>, the Emacs <em>client</em> for
the Language Server Protocol (LSP), is now &ndash; since version 29 &ndash; the
part of Emacs. It remains to choose the appropriate LSP.</p>
<h2 id="choosing-a-language-server">Choosing a Language Server</h2>
<p>I&rsquo;ve settled on <a href="https://clangd.llvm.org/">clangd</a>, a powerful LSP for
C++ based on the <a href="https://clang.llvm.org/">Clang</a> C++ compiler. It
provides an impressive set of
<a href="https://clangd.llvm.org/features">features</a> including error checking,
code completion, cross-references, navigation, and others.</p>
<p><code>clangd</code> is the part of the <a href="https://llvm.org/">LLVM</a> project and it can be
downloaded from <a href="https://releases.llvm.org/download.html">LLVM Download Page</a>.
Which version to download?
It depends on OS/version you are using. I&rsquo;m using
Pop!_OS 22.04 (Ubuntu 22.04 fork); after researching, I came upon
<em>clang+llvm-17.0.6-x86_64-linux-gnu-ubuntu-22.04.tar.xz</em>
from <a href="https://github.com/llvm/llvm-project/releases/tag/llvmorg-17.0.6">this repository</a>
that contains pre-build binaries for my OS. It supports C++17 standard
&ndash; that&rsquo;s good enough for me.</p>
<p>I&rsquo;ve unpacked the archive to <code>~/bin/LLVM-17.0.6/</code> then added
<code>$HOME/bin/LLVM-17.0.6/bin</code> to the <code>$PATH</code> envvar.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ clangd --version
</span></span><span style="display:flex;"><span>clangd version 17.0.6 <span style="color:#f92672">(</span>https://github.com/llvm/llvm-project 6009708b4367171ccdbf4b5905cb6a803753fe18<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Features: linux
</span></span><span style="display:flex;"><span>Platform: x86_64-unknown-linux-gnu
</span></span></code></pre></div><h3 id="configuring-clangd">Configuring clangd</h3>
<p>Clangd stores its configuration in YAML files. I&rsquo;m using <em>per-project</em>
configuration file <code>.clangd</code> &ndash; clangd searches for it in all parent
directories of the active file.</p>
<p>Below is my simple and straightforward <code>.clangd</code> for some of my projects.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#75715e"># Enable all warnings, use C++17 standard, specify include directories.</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">CompileFlags</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Add</span>: [-<span style="color:#ae81ff">xc++, -Wall, -std=c++17, -I/home/magnolia/workspace/devel, -I/home/magnolia/lib/grpc/include, -I/home/magnolia/lib/spdlog/include]</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Remove</span>: [-<span style="color:#ae81ff">W*]     </span> <span style="color:#75715e"># Strip all other warning-related flags</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">Compiler</span>: <span style="color:#ae81ff">clang++ </span> <span style="color:#75715e"># Use `clang++` explicitly</span>
</span></span></code></pre></div><p>It is placed in the <em>top level directory</em> of my project.
You can find more about <code>clangd</code> configuration <a href="https://clangd.llvm.org/config">here</a>.</p>
<p>Now we can return back to the Emacs configuration.</p>
<h2 id="emacs-configuration-for-c">Emacs Configuration for C++</h2>
<h3 id="using-eglot">Using Eglot</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;eglot</span>)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;c-mode-hook</span> <span style="color:#e6db74">&#39;eglot-ensure</span>)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;c++-mode-hook</span> <span style="color:#e6db74">&#39;eglot-ensure</span>)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;c-or-c++-mode-hook</span> <span style="color:#e6db74">&#39;eglot-ensure</span>)
</span></span></code></pre></div><p>The Eglot session will start automatically every time you open the C/C++ file in a buffer.
If the Eglot session for the current C/C++ buffer has started successfully
it displays the following message in the Emacs minibuffer:</p>
<pre tabindex="0"><code>[eglot] Connected! Server `clangd&#39; now managing `(c++-mode c-mode)&#39; buffers in project ...
</code></pre><h3 id="visual-improvements">Visual Improvements</h3>
<p>Highlighting symbols and numbers in the source code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Highlights the word/symbol at point and any other occurrences in</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; view. Also allows to jump to the next or previous occurrence.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://github.com/nschum/highlight-symbol.el</span>
</span></span><span style="display:flex;"><span>(use-package highlight-symbol
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (setq highlight-symbol-on-navigation-p <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;prog-mode-hook</span> <span style="color:#e6db74">&#39;highlight-symbol-mode</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Emacs minor mode that highlights numeric literals in source code.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://github.com/Fanael/highlight-numbers</span>
</span></span><span style="display:flex;"><span>(use-package highlight-numbers
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;prog-mode-hook</span> <span style="color:#e6db74">&#39;highlight-numbers-mode</span>))
</span></span></code></pre></div><h3 id="c-headers">C++ Headers</h3>
<p>Please, treat C headers as C++ ones.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; .h files to open in c++-mode rather than c-mode.</span>
</span></span><span style="display:flex;"><span>(add-to-list <span style="color:#e6db74">&#39;auto-mode-alist</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;\\.h$&#34;</span> <span style="color:#f92672">.</span> c++-mode))
</span></span></code></pre></div><h3 id="code-styles">Code Styles</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq c-default-style <span style="color:#e6db74">&#34;stroustrup&#34;</span>)
</span></span><span style="display:flex;"><span>(setq c-basic-indent <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>(setq c-basic-offset <span style="color:#ae81ff">4</span>)
</span></span></code></pre></div><p>I&rsquo;m using the Stroustrup C++ <a href="https://www.emacswiki.org/emacs/IndentingC">code style</a>
that is very similar to the K&amp;R (Kernighan &amp; Ritchie) code style.</p>
<p>The <code>c-style-alist</code> Elisp variable contains a list of all predefined code
styles. Pick a <a href="https://www.emacswiki.org/emacs/IndentingC">style</a> that suits you.</p>
<h3 id="indentation-inside-of-namespaces">Indentation Inside of Namespaces</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; emacs-fu: don’t indent inside of C++ namespaces</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; http://brrian.tumblr.com/post/9018043954/emacs-fu-dont-indent-inside-of-c-namespaces</span>
</span></span><span style="display:flex;"><span>(c-set-offset <span style="color:#e6db74">&#39;innamespace</span> <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><p>I prefer to have the code <em>unindented</em> inside of a namespace as shown below,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> tec {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Client</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Client() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">get_id</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}; <span style="color:#75715e">// ::Client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>} <span style="color:#75715e">// ::tec
</span></span></span></code></pre></div><p>rather than</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> tec {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Client</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        Client() {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">get_id</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>    }; <span style="color:#75715e">// ::Client
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>} <span style="color:#75715e">// ::tec
</span></span></span></code></pre></div><h3 id="spaces-vs-tabs">Spaces vs Tabs</h3>
<p>Yes, I&rsquo;m using spaces instead of tabs for indentation.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Spaces instead of tabs when indenting.</span>
</span></span><span style="display:flex;"><span>(setq-default indent-tabs-mode <span style="color:#66d9ef">nil</span>)
</span></span></code></pre></div><h3 id="trailing-tabs-and-spaces">Trailing Tabs and Spaces</h3>
<p>A builtin <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Useless-Whitespace.html">package</a>
that shows/deletes useless trailing tabs and spaces.
You can also use <code>M-x delete-trailing-whitespace</code> to remove all
trailing white-spaces in a buffer interactively.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; http://www.reddit.com/r/emacs/comments/2keh6u/show_tabs_and_trailing_whitespaces_only/</span>
</span></span><span style="display:flex;"><span>(use-package whitespace
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Commented since there are too many &#39;valid&#39; whitespaces in some modes.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; (setq-default show-trailing-whitespace t)</span>
</span></span><span style="display:flex;"><span>  (setq whitespace-style <span style="color:#f92672">&#39;</span>(face tabs trailing))
</span></span><span style="display:flex;"><span>  (set-face-attribute <span style="color:#e6db74">&#39;whitespace-tab</span> <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>      :background <span style="color:#e6db74">&#34;red&#34;</span>
</span></span><span style="display:flex;"><span>      :foreground <span style="color:#e6db74">&#34;yellow&#34;</span>
</span></span><span style="display:flex;"><span>      :weight <span style="color:#e6db74">&#39;bold</span>)
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;prog-mode-hook</span> <span style="color:#e6db74">&#39;whitespace-mode</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Delete trailing tabs and spaces on save of a file.</span>
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;before-save-hook</span> <span style="color:#e6db74">&#39;whitespace-cleanup</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h3 id="clangd-with-flymake">Clangd with Flymake</h3>
<style type="text/css">
     
    .notice {
        --title-color: #fff;
        --title-background-color: #6be;
        --content-color: #444;
        --content-background-color: #e7f2fa;
    }

    .notice.info {
        --title-background-color: #fb7;
        --content-background-color: #fec;
    }

    .notice.tip {
        --title-background-color: #5a5;
        --content-background-color: #efe;
    }

    .notice.warning {
        --title-background-color: #c33;
        --content-background-color: #fee;
    }

     
    @media (prefers-color-scheme:dark) {
        .notice {
            --title-color: #fff;
            --title-background-color: #069;
            --content-color: #ddd;
            --content-background-color: #023;
        }

        .notice.info {
            --title-background-color: #a50;
            --content-background-color: #420;
        }

        .notice.tip {
            --title-background-color: #363;
            --content-background-color: #121;
        }

        .notice.warning {
            --title-background-color: #800;
            --content-background-color: #400;
        }
    }

    body.dark .notice {
        --title-color: #fff;
        --title-background-color: #069;
        --content-color: #ddd;
        --content-background-color: #023;
    }

    body.dark .notice.info {
        --title-background-color: #a50;
        --content-background-color: #420;
    }

    body.dark .notice.tip {
        --title-background-color: #363;
        --content-background-color: #121;
    }

    body.dark .notice.warning {
        --title-background-color: #800;
        --content-background-color: #400;
    }

     
    .notice {
        padding: 18px;
        line-height: 24px;
        margin-bottom: 24px;
        border-radius: 4px;
        color: var(--content-color);
        background: var(--content-background-color);
    }

    .notice p:last-child {
        margin-bottom: 0
    }

     
    .notice-title {
        margin: -18px -18px 12px;
        padding: 4px 18px;
        border-radius: 4px 4px 0 0;
        font-weight: 700;
        color: var(--title-color);
        background: var(--title-background-color);
    }

     
    .icon-notice {
        display: inline-flex;
        align-self: center;
        margin-right: 8px;
    }

    .icon-notice img,
    .icon-notice svg {
        height: 1em;
        width: 1em;
        fill: currentColor;
    }

    .icon-notice img,
    .icon-notice.baseline svg {
        top: .125em;
        position: relative;
    }
</style><div class="notice info" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
  <path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
</svg>

        </span></p><p>This chapter is identical to the corresponding chapter in my previous post
<a href="https://olddeuteronomy.github.io/post/python-programming-in-emacs/">Python Programming in Emacs</a>.
I put it here for clarity.</p></div>

<p>Flymake is a minor Emacs mode performing on-the-fly syntax checks. I&rsquo;m
using the <code>flymake</code> built-in Emacs package as an Eglot front-end for
syntax checks.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;flymake</span>)
</span></span></code></pre></div><p>My custom <code>my/flymake-toggle-diagnostics-buffer</code> function toggles the
<em>Flymake diagnostics</em> buffer window.</p>
<p>If there is the Flymake diagnostics buffer associated with a file in
the current buffer, it shows the diagnostics buffer in the new window
and switches to it. If the current buffer <em>is</em> the Flymake diagnostics
buffer, it closes it. Otherwise it just shows the error message.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun my/flymake-toggle-diagnostics-buffer ()
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Check if we are in the diagnostics buffer.</span>
</span></span><span style="display:flex;"><span>  (if (string-search <span style="color:#e6db74">&#34;*Flymake diagnostics&#34;</span> (<span style="color:#a6e22e">buffer-name</span>))
</span></span><span style="display:flex;"><span>      (delete-window)
</span></span><span style="display:flex;"><span>    (progn
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Activate the Flymake diagnostics buffer.</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; and switch to it</span>
</span></span><span style="display:flex;"><span>      (flymake-show-buffer-diagnostics)
</span></span><span style="display:flex;"><span>      (let ((name (flymake--diagnostics-buffer-name)))
</span></span><span style="display:flex;"><span>        (if (<span style="color:#a6e22e">get-buffer</span> name)
</span></span><span style="display:flex;"><span>            (switch-to-buffer-other-window name)
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">error</span> <span style="color:#e6db74">&#34;No Flymake diagnostics buffer found&#34;</span>)
</span></span><span style="display:flex;"><span>          )))))
</span></span></code></pre></div><p>I&rsquo;ve bound this function to the <code>F7</code> key globally since I&rsquo;m using <code>F7</code>
in other programming modes as well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(global-set-key [(f7)] <span style="color:#a6e22e">#&#39;</span>my/flymake-toggle-diagnostics-buffer)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Additional bindings.</span>
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;C-c f b&#34;</span>) <span style="color:#a6e22e">#&#39;</span>flymake-show-buffer-diagnostics)
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;C-c f p&#34;</span>) <span style="color:#a6e22e">#&#39;</span>flymake-show-project-diagnostics)
</span></span></code></pre></div><p>The screenshot below shows what happens if you press <code>F7</code> while
editing a C++ file managed by Eglot + Flymake.</p>
<figure><a href="/img/cpp-eglot.png"><img src="/img/cpp-eglot.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<h2 id="treemacs">Treemacs</h2>
<p>From looking at the screenshot above, you can see using of
<a href="https://github.com/Alexander-Miller/treemacs">Treemacs</a>, a tree
layout file explorer for Emacs.</p>
<p>I can highly recommend to use it for any project you&rsquo;re working on in
conjunction with the excellent
<a href="https://github.com/bbatsov/projectile">Projectile</a>
and <a href="https://github.com/abo-abo/swiper">Ivy</a> packages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(use-package ivy
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (ivy-mode)
</span></span><span style="display:flex;"><span>  (setq ivy-use-virtual-buffers <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  (add-hook <span style="color:#e6db74">&#39;after-init-hook</span> (lambda () (setq ivy-height (<span style="color:#a6e22e">/</span> (window-height) <span style="color:#ae81ff">2</span>))))
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package projectile
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (projectile-global-mode)
</span></span><span style="display:flex;"><span>  (setq projectile-enable-caching <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  (setq projectile-completion-system <span style="color:#e6db74">&#39;ivy</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package treemacs :ensure <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>(use-package treemacs-projectile :ensure <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><p>I&rsquo;ve bound Treemacs to <code>F12</code> globally.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(global-set-key [(f12)] <span style="color:#a6e22e">#&#39;</span>treemacs-select-window)
</span></span></code></pre></div><p>Press <code>?</code> when in the Treemacs window to see all commands available.
Press <code>q</code> to close the Treemacs window.</p>
<h2 id="code-completion">Code Completion</h2>
<div class="notice info" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="92 59.5 300 300">
  <path d="M292 303.25V272c0-3.516-2.734-6.25-6.25-6.25H267v-100c0-3.516-2.734-6.25-6.25-6.25h-62.5c-3.516 0-6.25 2.734-6.25 6.25V197c0 3.516 2.734 6.25 6.25 6.25H217v62.5h-18.75c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h87.5c3.516 0 6.25-2.734 6.25-6.25Zm-25-175V97c0-3.516-2.734-6.25-6.25-6.25h-37.5c-3.516 0-6.25 2.734-6.25 6.25v31.25c0 3.516 2.734 6.25 6.25 6.25h37.5c3.516 0 6.25-2.734 6.25-6.25Zm125 81.25c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
</svg>

        </span></p><p>This chapter is identical to the corresponding chapter in my previous post
<a href="https://olddeuteronomy.github.io/post/python-programming-in-emacs/">Python Programming in Emacs</a>.
I put it here for clarity.</p></div>

<p>I&rsquo;m using the <a href="https://company-mode.github.io/"><code>company</code></a> package, a
modular in-buffer completion framework for Emacs, as an Eglot
front-end for code completion; it integrates with Eglot seamlessly.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;;;; `COMPANY&#39;</span>
</span></span><span style="display:flex;"><span>(use-package company
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (setq company-idle-delay <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>  (setq company-minimum-prefix-length <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>  (setq company-show-numbers <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; To prevent default down-casing.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; https://emacs.stackexchange.com/questions/10837/how-to-make-company-mode-be-case-sensitive-on-plain-text</span>
</span></span><span style="display:flex;"><span>  (setq company-dabbrev-downcase <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; 2023-01-13 From a Reddit post on mixed case issue.</span>
</span></span><span style="display:flex;"><span>  (setq company-dabbrev-ignore-case <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>  (setq company-dabbrev-code-ignore-case <span style="color:#66d9ef">nil</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Use `company&#39; everywhere.</span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;after-init-hook</span> <span style="color:#e6db74">&#39;global-company-mode</span>)
</span></span></code></pre></div><figure><a href="/img/cpp-company2.png"><img src="/img/cpp-company2.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<h2 id="code-navigation">Code Navigation</h2>
<p>My favorite tool for code navigation <em>in the current buffer</em> is the
excellent <code>imenu-list</code> <a href="https://github.com/bmag/imenu-list">package</a>.
Powered by Eglot, it shows almost everything you want to see.</p>
<figure><a href="/img/cpp-imenu.png"><img src="/img/cpp-imenu.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<p>Now your Emacs looks like a full-featured C++ IDE &ndash; and it is, actually.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Show the current buffer&#39;s imenu entries in a separate buffer</span>
</span></span><span style="display:flex;"><span>(use-package imenu-list
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (setq imenu-list-focus-after-activation <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  (global-set-key (kbd <span style="color:#e6db74">&#34;C-.&#34;</span>) <span style="color:#a6e22e">#&#39;</span>imenu-list-minor-mode)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>I&rsquo;ve bound <code>imenu-list-minor-mode</code> to <code>C-.</code>; this key chord will
toggle the Imenu buffer on/off.</p>
<p>Alternatively, you can use Treemacs to navigate through the code and files on a
<em>per-project</em> basis.</p>
<figure><a href="/img/cpp-treemacs.png"><img src="/img/cpp-treemacs.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<p>&ldquo;Classic&rdquo; default navigation keys will also work with all files in
your project.</p>
<dl>
<dt><code>xref-find-definitions</code></dt>
<dd><code>M-.</code> to find the definition of the identifier at point.</dd>
<dt><code>xref-go-back</code></dt>
<dd><code>M-,</code> to return back to where you invoked the <code>xref-find-definitions</code> command.</dd>
<dt><code>xref-find-references</code></dt>
<dd><code>M-?</code> to find references to the identifier at point.</dd>
</dl>
<p>These functions are now powered by Eglot.</p>
<h2 id="appendix-a">Appendix A</h2>
<h3 id="all-the-icons">All the Icons</h3>
<p>As you can see from the screenshots above, I like to see icons
wherever possible &ndash; in <code>treemacs</code>, <code>dired</code>, <code>ibuffer</code>, <code>company</code> and
other modes. To achieve that, all you need is to install the
corresponding packages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; https://github.com/domtronn/all-the-icons.el</span>
</span></span><span style="display:flex;"><span>(use-package all-the-icons :ensure <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package all-the-icons-dired :ensure <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;dired-mode-hook</span> <span style="color:#e6db74">&#39;all-the-icons-dired-mode</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package all-the-icons-ibuffer :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :init (all-the-icons-ibuffer-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>  :hook (ibuffer-mode <span style="color:#f92672">.</span> all-the-icons-ibuffer-mode))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package treemacs-all-the-icons :ensure <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(use-package all-the-icons-ivy :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :after all-the-icons
</span></span><span style="display:flex;"><span>  :config (all-the-icons-ivy-setup))
</span></span></code></pre></div><div class="notice tip" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="300.5 134 300 300">
  <path d="M551.281 252.36c0-3.32-1.172-6.641-3.515-8.985l-17.774-17.578c-2.344-2.344-5.469-3.711-8.789-3.711-3.32 0-6.445 1.367-8.789 3.71l-79.687 79.493-44.141-44.14c-2.344-2.344-5.469-3.712-8.79-3.712-3.32 0-6.444 1.368-8.788 3.711l-17.774 17.579c-2.343 2.343-3.515 5.664-3.515 8.984 0 3.32 1.172 6.445 3.515 8.789l70.704 70.703c2.343 2.344 5.664 3.711 8.789 3.711 3.32 0 6.64-1.367 8.984-3.71l106.055-106.056c2.343-2.343 3.515-5.468 3.515-8.789ZM600.5 284c0 82.813-67.188 150-150 150-82.813 0-150-67.188-150-150 0-82.813 67.188-150 150-150 82.813 0 150 67.188 150 150Z"/>
</svg>

        </span></p><p>To install icons font, please follow
these <a href="https://github.com/domtronn/all-the-icons.el#installing-fonts">instructions</a>.</p></div>

<h2 id="appendix-b">Appendix B</h2>
<h3 id="a-note-for-tree-sitter-users">A Note for Tree-Sitter Users</h3>
<div class="notice note" >
    <p class="notice-title">
        <span class="icon-notice baseline">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 128 300 300">
  <path d="M150 128c82.813 0 150 67.188 150 150 0 82.813-67.188 150-150 150C67.187 428 0 360.812 0 278c0-82.813 67.188-150 150-150Zm25 243.555v-37.11c0-3.515-2.734-6.445-6.055-6.445h-37.5c-3.515 0-6.445 2.93-6.445 6.445v37.11c0 3.515 2.93 6.445 6.445 6.445h37.5c3.32 0 6.055-2.93 6.055-6.445Zm-.39-67.188 3.515-121.289c0-1.367-.586-2.734-1.953-3.516-1.172-.976-2.93-1.562-4.688-1.562h-42.968c-1.758 0-3.516.586-4.688 1.563-1.367.78-1.953 2.148-1.953 3.515l3.32 121.29c0 2.734 2.93 4.882 6.64 4.882h36.134c3.515 0 6.445-2.148 6.64-4.883Z"/>
</svg>

        </span></p><p><strong>I do not use Tree-Sitter for coding in C++</strong>. It seems it has
its own rules for indentation that break down the code style I prefer.</p></div>

<p>Happy emacsing!</p>
<p>&ndash; The Emacs Cat.</p>
<p><em>P.S.</em> Emacs 30.1 has been released on February 23. Thanks for everyone
involved with this great project!</p>
<p><em>P.P.S.</em> Mickey Petersen has published his excellent
<a href="https://www.masteringemacs.org/article/whats-new-in-emacs-301">review</a>
on what&rsquo;s new in this release.</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/post/python-programming-in-emacs/" rel="bookmark">
			Python Programming in Emacs
			</a>
		</h2>
		<p class="list__lead post__lead">Making a lightweight and fast Python IDE in Emacs.</p>
		<div class="list__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">The Emacs Cat</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2024-12-26T10:01:05&#43;01:00">Thursday, Dec 26, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/2024/" rel="category">2024</a>
	</span>
</div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		<p>Python is one of my programming languages I&rsquo;m using for both work and
home life &ndash; no doubt, I&rsquo;d want to use Emacs as an IDE for Python
programming. There is a certain set of features we&rsquo;d expect to have
in any IDE: 1) code completion, 2) code navigation, 3) error checking.</p>
<p>Thanks to the fact that both <code>eglot</code>, the Emacs client for the
Language Server Protocol (LSP), and <code>tree-sitter</code>, a powerful parsing
library, are now &ndash; since version 29 &ndash; the parts of Emacs, It should
not be too hard to construct a lightweight and fast Python IDE.</p>
<h2 id="choosing-a-language-server">Choosing a Language Server</h2>
<p>There are a number of the language servers for Python available these days &ndash;
<a href="https://github.com/python-lsp/python-lsp-server">pylsp</a>,
<a href="https://github.com/palantir/python-language-server">pyls</a>,
<a href="https://github.com/microsoft/pyright">pyright</a>,
<a href="https://github.com/pappasam/jedi-language-server">jedi-language-server</a>.
After a series of tests, I&rsquo;ve settled on <a href="https://github.com/microsoft/pyright">pyright</a>,
an open syntax and type checker from Microsoft <em>(sic!)</em> used in Visual Studio Code,
the fast and reliable one, as for me.</p>
<p>The Pyright <a href="https://microsoft.github.io/pyright/#/">documentation</a> &ndash;
a bit weird &ndash; claims that Pyright is just static type checker for Python.
However, as we&rsquo;ll see later, Pyright can do much more than just type checks.</p>
<h2 id="a-note-on-the-tree-sitter-package">A note on the Tree-Sitter package</h2>
<p>The <code>tree-sitter</code> package is optional &ndash; I&rsquo;m using it for
pretty-looking source code fontification mainly. However, if you want
to use it you have to pay attention to the following quote from the
Mickey Petersen&rsquo;s <a href="https://www.masteringemacs.org/article/how-to-get-started-tree-sitter">&lsquo;Mastering Emacs&rsquo;</a>
book:</p>
<blockquote>
<p>And in Emacs 29, support for tree-sitter is built in. Sort of. It&rsquo;s an
optional extra, so you must compile Emacs from source, or hope that
someone else will do it for you.</p>
<p>Neither tree-sitter nor Emacs come installed with language grammars.
Just like kids&rsquo; toys and batteries, they&rsquo;re sold separately. So you&rsquo;re
required to download and compile the sources for each language grammar
you want to use.</p>
<p><em>&ndash; Mastering Emacs by Mickey Petersen.</em></p>
</blockquote>
<p>If you are &ndash; like me &ndash; on Linux, the best way to setup language
grammars is to compile them from the source code; you can find all grammars
available on the <a href="https://github.com/orgs/tree-sitter/repositories?type=all">tree-sitter repository</a>.
More details at <a href="https://www.masteringemacs.org/article/how-to-get-started-tree-sitter">How to Get Started with Tree-Sitter</a>.</p>
<h2 id="python-prerequisites">Python prerequisites</h2>
<p>First of all, we need to install the following Python packages &ndash;
<code>pyright</code> (the language server) and <code>jsonrpc</code> (the transport layer for
the LSP).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>p3<span style="color:#f92672">]</span> $ pip install pyright
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>p3<span style="color:#f92672">]</span> $ pip install jsonrpc
</span></span></code></pre></div><p>I&rsquo;m running Python in the virtual environment, &ldquo;p3&rdquo; in my case.</p>
<h2 id="error-checking-with-pyright">Error checking with Pyright</h2>
<p>Eglot automatically finds a suitable LSP &ndash; Pyright in our case &ndash;
when you are opening a Python file. I&rsquo;m using the default Pyright
settings, no extra tuning required.</p>
<h3 id="pyright-lsp-with-flymake">Pyright LSP with Flymake</h3>
<p>Flymake is a minor Emacs mode performing on-the-fly syntax checks. I&rsquo;m
using the <code>flymake</code> built-in Emacs package as an Eglot front-end for
syntax checks.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;flymake</span>)
</span></span></code></pre></div><p>My custom <code>my/flymake-toggle-diagnostics-buffer</code> function toggles the
<em>Flymake diagnostics</em> buffer window.</p>
<p>If there is the Flymake diagnostics buffer associated with a file in
the current buffer, it shows the diagnostics buffer in the new window
and switches to it. If the current buffer <em>is</em> the Flymake diagnostics
buffer, it closes it. Otherwise it just shows the error message.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun my/flymake-toggle-diagnostics-buffer ()
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; Check if we are in the diagnostics buffer.</span>
</span></span><span style="display:flex;"><span>  (if (string-search <span style="color:#e6db74">&#34;*Flymake diagnostics&#34;</span> (<span style="color:#a6e22e">buffer-name</span>))
</span></span><span style="display:flex;"><span>      (delete-window)
</span></span><span style="display:flex;"><span>    (progn
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Activate the Flymake diagnostics buffer.</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; and switch to it</span>
</span></span><span style="display:flex;"><span>      (flymake-show-buffer-diagnostics)
</span></span><span style="display:flex;"><span>      (let ((name (flymake--diagnostics-buffer-name)))
</span></span><span style="display:flex;"><span>        (if (<span style="color:#a6e22e">get-buffer</span> name)
</span></span><span style="display:flex;"><span>            (switch-to-buffer-other-window name)
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">error</span> <span style="color:#e6db74">&#34;No Flymake diagnostics buffer found&#34;</span>)
</span></span><span style="display:flex;"><span>          )))))
</span></span></code></pre></div><p>I&rsquo;ve bound this function to the <code>F7</code> key globally since I&rsquo;m using <code>F7</code>
in other programming modes as well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(global-set-key [(f7)] <span style="color:#a6e22e">#&#39;</span>my/flymake-toggle-diagnostics-buffer)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Additional bindings.</span>
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;C-c f b&#34;</span>) <span style="color:#a6e22e">#&#39;</span>flymake-show-buffer-diagnostics)
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;C-c f p&#34;</span>) <span style="color:#a6e22e">#&#39;</span>flymake-show-project-diagnostics)
</span></span></code></pre></div><p>The screenshot below shows what happens if you press <code>F7</code> while
editing a Python file managed by Eglot + Flymake.</p>
<figure><a href="/img/python-pyright.png"><img src="/img/python-pyright.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<p>As you can see, Pyright can do much more than just type checks.</p>
<h2 id="code-completion">Code completion</h2>
<p>I&rsquo;m using the <a href="https://company-mode.github.io/"><code>company</code></a> package, a
modular in-buffer completion framework for Emacs, as an Eglot
front-end for code completion; it integrates with Eglot seamlessly.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;;;; `COMPANY&#39;</span>
</span></span><span style="display:flex;"><span>(use-package company
</span></span><span style="display:flex;"><span>  :ensure <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>  :config
</span></span><span style="display:flex;"><span>  (setq company-idle-delay <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>  (setq company-minimum-prefix-length <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>  (setq company-show-numbers <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; To prevent default down-casing.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; https://emacs.stackexchange.com/questions/10837/how-to-make-company-mode-be-case-sensitive-on-plain-text</span>
</span></span><span style="display:flex;"><span>  (setq company-dabbrev-downcase <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">;; 2023-01-13 From a Reddit post on mixed case issue.</span>
</span></span><span style="display:flex;"><span>  (setq company-dabbrev-ignore-case <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>  (setq company-dabbrev-code-ignore-case <span style="color:#66d9ef">nil</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Use `company&#39; everywhere.</span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;after-init-hook</span> <span style="color:#e6db74">&#39;global-company-mode</span>)
</span></span></code></pre></div><figure><a href="/img/python-eglot.png"><img src="/img/python-eglot.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<h2 id="code-navigation">Code navigation</h2>
<p>I&rsquo;m using the default key bindings for</p>
<dl>
<dt><code>xref-find-definitions</code></dt>
<dd><code>M-.</code> to find the definition of the identifier at point.</dd>
<dt><code>xref-go-back</code></dt>
<dd><code>M-,</code> to return back to where you invoked the <code>xref-find-definitions</code> command.</dd>
<dt><code>xref-find-references</code></dt>
<dd><code>M-?</code> to find references to the identifier at point.</dd>
</dl>
<p>These functions are now powered by Eglot.</p>
<h2 id="final-notes">Final notes</h2>
<p>I can recommend to force using Eglot for Python explicitly &ndash;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(require <span style="color:#e6db74">&#39;eglot</span>)
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;python-mode-hook</span> <span style="color:#e6db74">&#39;eglot-ensure</span>)
</span></span></code></pre></div><h3 id="a-note-for-tree-sitter-users">A note for Tree-Sitter users</h3>
<p>If you are using Tree-Sitter for Python, it&rsquo;s recommended to <em>remap</em>
the <code>python-mode</code> to the Tree-Sitter specific <code>python-ts-mode</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(add-to-list <span style="color:#e6db74">&#39;major-mode-remap-alist</span> <span style="color:#f92672">&#39;</span>(python-mode <span style="color:#f92672">.</span> python-ts-mode))
</span></span></code></pre></div><p>If this is the case, do not forget to force using Eglot for this mode
as well.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;python-ts-mode-hook</span> <span style="color:#e6db74">&#39;eglot-ensure</span>)
</span></span></code></pre></div><p>Happy emacsing!</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/post/emacs-startup-screen/" rel="bookmark">
			Emacs Startup Screen
			</a>
		</h2>
		<p class="list__lead post__lead">Constructing a custom startup screen</p>
		<div class="list__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">The Emacs Cat</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2024-12-06T18:40:56&#43;01:00">Friday, Dec 6, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/2024/" rel="category">2024</a>
	</span>
</div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		<p>Some time ago, I decided to customize my Emacs startup screen in order
to display something helpful for me. Ultimately, after much
consideration, I settled on the following items I just want to see on
my startup screen: 1) 3-month calendar, 2) agenda, 3) diary, 4)
something just for fun.</p>
<p>No doubt, there are a number of packages that can assist you in making
a pretty good-looking startup screen &ndash; like
<a href="https://github.com/ichernyshovvv/enlight">enlight</a>, for instance.
However, I decided to construct my own startup screen, a very simple
one.</p>
<p>It requires having two command line utilities installed on your
system: <code>fortune</code> to print out a random epigram, and <code>calendar</code> to
print out some of the events that have occurred on the current date in
the past. If you, like me, are using Linux or macOS &ndash; it will not be
difficult to install them.</p>
<p>And this is what I got&hellip;</p>
<h2 id="in-the-emacs-init-file">In the <code>.emacs</code> init file</h2>
<p>First of all, disable the builtin startup screen.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq inhibit-startup-screen <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><p>Then add a startup hook.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;emacs-startup-hook</span>
</span></span><span style="display:flex;"><span>  (lambda ()
</span></span><span style="display:flex;"><span>    (let* ((buffer-today (<span style="color:#a6e22e">get-buffer-create</span> <span style="color:#e6db74">&#34;*today*&#34;</span>))
</span></span><span style="display:flex;"><span>           (buffer-calendar <span style="color:#e6db74">&#34;*Calendar*&#34;</span>)
</span></span><span style="display:flex;"><span>           (buffer-agenda <span style="color:#e6db74">&#34;*Org Agenda*&#34;</span>)
</span></span><span style="display:flex;"><span>           (buffer-diary <span style="color:#e6db74">&#34;*Fancy Diary Entries*&#34;</span>))
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Call calendar first to obtain the current date</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; required to display the diary.</span>
</span></span><span style="display:flex;"><span>      (calendar)
</span></span><span style="display:flex;"><span>      (diary)
</span></span><span style="display:flex;"><span>      (org-agenda-list)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Fill and show the Today Events buffer.</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; NOTE: requires `fortune&#39; and `calendar&#39; command line utilities.</span>
</span></span><span style="display:flex;"><span>      (switch-to-buffer buffer-today)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">call-process</span> <span style="color:#e6db74">&#34;fortune&#34;</span> <span style="color:#66d9ef">nil</span> buffer-today)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">insert</span> <span style="color:#e6db74">&#34;\n&#34;</span>)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">call-process</span> <span style="color:#e6db74">&#34;calendar&#34;</span> <span style="color:#66d9ef">nil</span> buffer-today)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">goto-char</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>      (toggle-truncate-lines)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Maximize the Today Events window</span>
</span></span><span style="display:flex;"><span>      (delete-other-windows)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Show Agenda in the lower left quadrant.</span>
</span></span><span style="display:flex;"><span>      (split-window-vertically)
</span></span><span style="display:flex;"><span>      (other-window <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>      (switch-to-buffer (<span style="color:#a6e22e">get-buffer</span> buffer-agenda))
</span></span><span style="display:flex;"><span>      (split-window-horizontally)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Try to show Diary in the lower right quadrant.</span>
</span></span><span style="display:flex;"><span>      (other-window <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>      (if (<span style="color:#a6e22e">get-buffer</span> buffer-diary)
</span></span><span style="display:flex;"><span>          <span style="color:#75715e">;; If Diary exists then show it ...</span>
</span></span><span style="display:flex;"><span>          (switch-to-buffer (<span style="color:#a6e22e">get-buffer</span> buffer-diary))
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">;; ... else show the scratch buffer.</span>
</span></span><span style="display:flex;"><span>        (let* ((buffer-scratch (switch-to-buffer (<span style="color:#a6e22e">get-buffer</span> <span style="color:#e6db74">&#34;*scratch*&#34;</span>))))
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">goto-char</span> (<span style="color:#a6e22e">point-max</span>))
</span></span><span style="display:flex;"><span>          (<span style="color:#a6e22e">insert</span> (<span style="color:#a6e22e">format-time-string</span> <span style="color:#e6db74">&#34;\n;; No diary entries for %A %d %b&#34;</span>)))
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Go back to the Today Events buffer.</span>
</span></span><span style="display:flex;"><span>      (other-window <span style="color:#ae81ff">-2</span>)
</span></span><span style="display:flex;"><span>      (split-window-horizontally)
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">;; Show Calendar in the upper left quadrant.</span>
</span></span><span style="display:flex;"><span>      (switch-to-buffer (<span style="color:#a6e22e">get-buffer</span> buffer-calendar))
</span></span><span style="display:flex;"><span>      )))
</span></span></code></pre></div><h2 id="the-startup-screen">The startup screen</h2>
<figure><a href="/img/emacs-init-screen.png"><img src="/img/emacs-init-screen.png"/></a><figcaption>
            <h4>Click or tap to view the full-size picture.</h4>
        </figcaption>
</figure>

<p>Happy emacsing!</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/post/some-excerpts-from-config-2-functions/" rel="bookmark">
			Some Excerpts From My Emacs Config - 2: Functions
			</a>
		</h2>
		<p class="list__lead post__lead">Some functions and mode enhancements from my .emacs</p>
		<div class="list__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">The Emacs Cat</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2024-11-29T11:45:17&#43;01:00">Friday, Nov 29, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/2024/" rel="category">2024</a>
	</span>
</div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		<p>In his comment on <a href="https://irreal.org/blog/">Irreal</a>&rsquo;s post
<a href="https://irreal.org/blog/?p=12595">Some Configuration To Solve Common Problems</a>,
<a href="https://disqus.com/by/gregbognar/">gregbognar</a> noted that some of my
configuration <em>is seriously outdated</em>. In some sense, he is absolutely
correct &ndash; I&rsquo;ve been collecting Emacs settings/tweaks since 2012, and
keeping them unmodified for 12+ years.</p>
<p>But on the other hand, it demonstrates how stable and powerful Emacs
is &ndash; everything is still working! <em>If something works, don&rsquo;t fix it</em>
&ndash; I&rsquo;ve since tried to apply this rule wherever possible.</p>
<p>Here are a few functions/enhancements I found helpful.</p>
<h2 id="dired-mode-enhancements"><code>dired-mode</code> enhancements</h2>
<h3 id="function-calculate-the-total-size-of-all-marked-files">Function: Calculate the total size of all marked files</h3>
<p>The custom <code>dired-get-size</code> function calculates the total size of all
marked files in the dired buffer and displays it in the echo area.
Files in the dired buffer can be marked with <code>m</code> key and unmarked with
<code>u</code> key.</p>
<p>The current version only works on systems with the <code>/usr/bin/du</code>
system utility, which actually comprise 100% of the (non-Windows)
systems &ndash; borrowed from <a href="https://oremacs.com/2015/01/12/dired-file-size/">oremacs.com</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun dired-get-size ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Display file size in dired.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (let ((files (dired-get-marked-files)))
</span></span><span style="display:flex;"><span>    (with-temp-buffer
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">apply</span> <span style="color:#e6db74">&#39;call-process</span> <span style="color:#e6db74">&#34;/usr/bin/du&#34;</span> <span style="color:#66d9ef">nil</span> <span style="color:#66d9ef">t</span> <span style="color:#66d9ef">nil</span> <span style="color:#e6db74">&#34;-sch&#34;</span> files)
</span></span><span style="display:flex;"><span>      (<span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e6db74">&#34;Size of all marked files: %s&#34;</span>
</span></span><span style="display:flex;"><span>       (progn
</span></span><span style="display:flex;"><span>         (<span style="color:#a6e22e">re-search-backward</span> <span style="color:#e6db74">&#34;\\(^[ 0-9.,]+[A-Za-z]+\\).*total$&#34;</span>)
</span></span><span style="display:flex;"><span>         (match-string <span style="color:#ae81ff">1</span>))))))
</span></span></code></pre></div><p>In my config, <code>dired-get-size</code> is bound to <code>z</code> key in the <code>dired-mode</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; https://oremacs.com/2015/01/12/dired-file-size/</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> dired-mode-map <span style="color:#e6db74">&#34;z&#34;</span> <span style="color:#a6e22e">#&#39;</span>dired-get-size)
</span></span></code></pre></div><figure><img src="/img/dired-z.png"/><figcaption>
            <h4>The result of pressing the `z` key in dired.</h4>
        </figcaption>
</figure>

<h3 id="some-other-dired-mode-enhancements">Some other <code>dired-mode</code> enhancements</h3>
<h4 id="move-to-the-parent-directory">Move to the parent directory</h4>
<p>It reuses the current <code>dired</code> buffer for opening the parent
directory (<a href="https://oremacs.com/2015/01/21/dired-shortcuts/">oremacs.com</a>)
instead of creating a new buffer.
Bounded to the <code>a</code> key in <code>dired-mode</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Move to the parent directory.</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> dired-mode-map <span style="color:#e6db74">&#34;a&#34;</span>
</span></span><span style="display:flex;"><span>  (lambda ()
</span></span><span style="display:flex;"><span>    (interactive)
</span></span><span style="display:flex;"><span>    (find-alternate-file <span style="color:#e6db74">&#34;..&#34;</span>)))
</span></span></code></pre></div><h4 id="run-eshell-in-the-current-dired-directory">Run <code>eshell</code> in the current <code>dired</code> directory</h4>
<p>Bounded to the ` back-tick key in <code>dired-mode</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Run eshell.</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> dired-mode-map <span style="color:#e6db74">&#34;`&#34;</span>
</span></span><span style="display:flex;"><span>  (lambda ()
</span></span><span style="display:flex;"><span>    (interactive)
</span></span><span style="display:flex;"><span>    (eshell)))
</span></span></code></pre></div><h2 id="date-and-time-stamps">Date and time stamps</h2>
<p>Inserting the date and/or time stamps at the current cursor position.
You can bind these functions to any key chords you prefer or call the
corresponding function with <code>M-x</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun my/time-stamp ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Insert full date/time stamp as 2024-11-29 10:41 +0100 CET&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">insert</span> (<span style="color:#a6e22e">format-time-string</span> <span style="color:#e6db74">&#34;%Y-%m-%d %R %z %Z&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun my/time-stamp-short ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Insert short date/time stamp as 2024-11-29 10:41&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">insert</span> (<span style="color:#a6e22e">format-time-string</span> <span style="color:#e6db74">&#34;%Y-%m-%d %R&#34;</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(defun my/date-stamp ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Insert date stamp as 2024-11-29&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">insert</span> (<span style="color:#a6e22e">format-time-string</span> <span style="color:#e6db74">&#34;%Y-%m-%d&#34;</span>)))
</span></span></code></pre></div><h2 id="some-editing-tweaks">Some editing tweaks</h2>
<h3 id="inserting-a-new-line">Inserting a new line</h3>
<p>Insert a new line, indent it, and move the cursor there. This behavior
is different then the typical function bound to <code>Enter</code> which may be
<code>open-line</code> or <code>newline-and-indent</code>. When you call them with the cursor
between ^ (beginning of line) and $ (end of line), the contents of the
line to the right of it will be moved to the newly inserted line. <em>This
function will not do that</em>. Instead, the current line is <em>left alone</em>, a new line
is inserted, indented, and the cursor is moved there. Borrowed from
<a href="http://emacsredux.com/blog/2013/03/26/smarter-open-line/">emacsredux</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun smart-open-line ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Insert a new line, indent it, and move the cursor there.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (move-end-of-line <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>  (newline-and-indent))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;&lt;C-return&gt;&#34;</span>) <span style="color:#a6e22e">#&#39;</span>smart-open-line)
</span></span></code></pre></div><p>I have bound it globally to <code>Ctrl-Enter</code> &ndash; <code>C-return</code> in the Emacs
notation &ndash; so it should work in any mode.</p>
<h3 id="smart-beginning-of-line">Smart beginning of line</h3>
<p>Move point to first non-whitespace character or <code>beginning-of-line</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun smart-beginning-of-line ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Move point to first non-whitespace character or `beginning-of-line`.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (let ((oldpos (<span style="color:#a6e22e">point</span>)))
</span></span><span style="display:flex;"><span>    (back-to-indentation)
</span></span><span style="display:flex;"><span>    (and (<span style="color:#a6e22e">=</span> oldpos (<span style="color:#a6e22e">point</span>))
</span></span><span style="display:flex;"><span>         (<span style="color:#a6e22e">beginning-of-line</span>))))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(global-set-key (kbd <span style="color:#e6db74">&#34;C-a&#34;</span>) <span style="color:#a6e22e">#&#39;</span>smart-beginning-of-line)
</span></span></code></pre></div><p>I&rsquo;ve rebound the <em>default</em> <code>Ctrl-A</code> &ndash; <code>C-a</code> in the Emacs notation &ndash; to
move to first non-whitespace character of a line instead of first
column.</p>
<h3 id="killing-a-word-at-point">Killing a word at point</h3>
<p>Deleting the whole word at the cursor position.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun kill-whole-word ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Kill the current word at point.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (backward-word)
</span></span><span style="display:flex;"><span>  (kill-word <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">define-key</span> global-map (kbd <span style="color:#e6db74">&#34;&lt;M-DEL&gt;&#34;</span>) <span style="color:#a6e22e">#&#39;</span>kill-whole-word)
</span></span></code></pre></div><p>I&rsquo;ve rebound it to <code>Alt-delete</code> &ndash; <code>M-DEL</code> in the Emacs notation.</p>
<h2 id="nuke-all-buffers">Nuke all buffers</h2>
<p>Kill all buffers, leaving <em>*scratch*</em> only.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defun nuke-all-buffers ()
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;Kill all buffers, leaving *scratch* only.&#34;</span>
</span></span><span style="display:flex;"><span>  (interactive)
</span></span><span style="display:flex;"><span>  (<span style="color:#a6e22e">mapc</span>
</span></span><span style="display:flex;"><span>   (lambda (buffer)
</span></span><span style="display:flex;"><span>     (<span style="color:#a6e22e">kill-buffer</span> buffer))
</span></span><span style="display:flex;"><span>   (<span style="color:#a6e22e">buffer-list</span>))
</span></span><span style="display:flex;"><span>  (delete-other-windows))
</span></span></code></pre></div><p>To be continued. Happy emacsing!</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/post/some-excerpts-from-my-emacs-config/" rel="bookmark">
			Some Excerpts From My Emacs Config
			</a>
		</h2>
		<p class="list__lead post__lead">Some mini/micro excerpts from my .emacs</p>
		<div class="list__meta meta"><div class="meta__item-author meta__item">
	<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2 0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class="meta__text">The Emacs Cat</span>
</div>
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2024-11-20T11:52:19&#43;01:00">Wednesday, Nov 20, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/2024/" rel="category">2024</a>
	</span>
</div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		<p>I&rsquo;m happy to be back after one year away and it feels great.</p>
<p>Below are some chaotic mini/micro &ndash; or even nano &ndash; excerpts from my
<code>~/.emacs</code> file I have been tuning in for 12 years. These days, I&rsquo;m
running Emacs 29.4 on Ubuntu (Pop!_OS) 22.04 and, rarely, on macOS.</p>
<p>These tweaks have been collected from various sources; I provide a
reference to the source if available.</p>
<h2 id="checking-the-operating-system-emacs-is-running-on">Checking the operating system Emacs is running on</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defvar my/os-linux (<span style="color:#a6e22e">string-equal</span> system-type <span style="color:#e6db74">&#34;gnu/linux&#34;</span>) <span style="color:#e6db74">&#34;I&#39;m on Linux&#34;</span>)
</span></span><span style="display:flex;"><span>(defvar my/os-macos (<span style="color:#a6e22e">string-equal</span> system-type <span style="color:#e6db74">&#34;darwin&#34;</span>) <span style="color:#e6db74">&#34;Oh, I&#39;m on macOS&#34;</span>)
</span></span><span style="display:flex;"><span>(defvar my/os-windows (<span style="color:#a6e22e">string-equal</span> system-type <span style="color:#e6db74">&#34;windows-nt&#34;</span>) <span style="color:#e6db74">&#34;OMG, that&#39;s Windows!&#34;</span>)
</span></span></code></pre></div><h2 id="macos-keyboard">macOS keyboard</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Disable Command key and enable Options as Meta.</span>
</span></span><span style="display:flex;"><span>(if my/os-macos
</span></span><span style="display:flex;"><span>    (setq mac-command-key-is-meta <span style="color:#66d9ef">nil</span>
</span></span><span style="display:flex;"><span>          mac-command-modifier <span style="color:#e6db74">&#39;super</span>
</span></span><span style="display:flex;"><span>          mac-option-key-is-meta <span style="color:#66d9ef">t</span>
</span></span><span style="display:flex;"><span>          mac-option-modifier <span style="color:#e6db74">&#39;meta</span>))
</span></span></code></pre></div><h2 id="everything-is-utf-8">Everything is UTF-8</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(set-language-environment <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(setq locale-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(setq buffer-file-coding-system <span style="color:#e6db74">&#39;utf-8-unix</span>)
</span></span><span style="display:flex;"><span>(set-terminal-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(set-keyboard-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(set-selection-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span><span style="display:flex;"><span>(prefer-coding-system <span style="color:#e6db74">&#39;utf-8</span>)
</span></span></code></pre></div><h2 id="smooth-scrolling">Smooth scrolling</h2>
<p>Borrowed from <a href="http://home.thep.lu.se/~karlf/emacs.html">http://home.thep.lu.se/~karlf/emacs.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(setq scroll-step <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Marker distance from center (don&#39;t jump to center).</span>
</span></span><span style="display:flex;"><span>(setq scroll-conservatively <span style="color:#ae81ff">100000</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Try to keep screen position when PgDn/PgUp.</span>
</span></span><span style="display:flex;"><span>(setq scroll-preserve-screen-position <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Start scrolling when marker at top/bottom.</span>
</span></span><span style="display:flex;"><span>(setq scroll-margin <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Mouse scroll moves 1 line at a time, instead of 5 lines.</span>
</span></span><span style="display:flex;"><span>(setq mouse-wheel-scroll-amount <span style="color:#f92672">&#39;</span>(<span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; On a long mouse scroll keep scrolling by 1 line.</span>
</span></span><span style="display:flex;"><span>(setq mouse-wheel-progressive-speed <span style="color:#66d9ef">nil</span>)
</span></span></code></pre></div><h2 id="some-helpful-tips-for-emacsing-in-comfort">Some helpful tips for emacsing in comfort</h2>
<h3 id="clipboard">Clipboard</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Non-nil means cutting and pasting uses the clipboard.</span>
</span></span><span style="display:flex;"><span>(setq x-select-enable-clipboard <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><h3 id="turning-off-some-annoying-features">Turning off some annoying features</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; No ToolBar, please.</span>
</span></span><span style="display:flex;"><span>(tool-bar-mode <span style="color:#ae81ff">-1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; No alarms, please.</span>
</span></span><span style="display:flex;"><span>(setq ring-bell-function <span style="color:#e6db74">&#39;ignore</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; No lock files, please.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://emacs.stackexchange.com/questions/78800/how-to-disable-automatic-appearance-of-warnings-buffer-in-emacs</span>
</span></span><span style="display:flex;"><span>(setq create-lockfiles <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Sentences do not need double spaces to end. Period.</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">set-default</span> <span style="color:#e6db74">&#39;sentence-end-double-space</span> <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Replace &#34;yes&#34; by &#34;y&#34;.</span>
</span></span><span style="display:flex;"><span>(<span style="color:#a6e22e">fset</span> <span style="color:#e6db74">&#39;yes-or-no-p</span> <span style="color:#e6db74">&#39;y-or-n-p</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Don’t use dialog boxes.</span>
</span></span><span style="display:flex;"><span>(setq use-dialog-box <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; For gpg (works on Ubuntu and macOS) to disable custom prompt.</span>
</span></span><span style="display:flex;"><span>(setenv <span style="color:#e6db74">&#34;GPG_AGENT_INFO&#34;</span> <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Speedup cursor movement.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://emacs.stackexchange.com/questions/28736/emacs-pointcursor-movement-lag/28746</span>
</span></span><span style="display:flex;"><span>(setq auto-window-vscroll <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Spaces instead of tabs when indenting.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Some people may not agree with this though.</span>
</span></span><span style="display:flex;"><span>(setq-default indent-tabs-mode <span style="color:#66d9ef">nil</span>)
</span></span></code></pre></div><h3 id="turning-on-some-helpful-features">Turning on some helpful features</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Nonzero means echo unfinished commands after this many seconds of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; pause. The value may be integer or floating point. If the value is</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; zero, don’t echo at all.</span>
</span></span><span style="display:flex;"><span>(setq echo-keystrokes <span style="color:#ae81ff">0.01</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Winner mode is a global minor mode that records the changes in the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; window configuration.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://www.gnu.org/software/emacs/manual/html_node/emacs/Window-Convenience.html</span>
</span></span><span style="display:flex;"><span>(winner-mode <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Turn on highlighting current line.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; http://ergoemacs.org/emacs/emacs_make_modern.html</span>
</span></span><span style="display:flex;"><span>(global-hl-line-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Replace highlighted text with what I type rather than just</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; inserting at point.</span>
</span></span><span style="display:flex;"><span>(delete-selection-mode <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Restore opened files.</span>
</span></span><span style="display:flex;"><span>(desktop-save-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Save minibuffer history.</span>
</span></span><span style="display:flex;"><span>(savehist-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; When on a tab, make the cursor the tab length.</span>
</span></span><span style="display:flex;"><span>(setq-default x-stretch-cursor <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Auto refresh dired when file changes.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; http://pragmaticemacs.com/emacs/automatically-revert-buffers/</span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;dired-mode-hook</span> <span style="color:#e6db74">&#39;auto-revert-mode</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Auto refresh dired, but be quiet about it.</span>
</span></span><span style="display:flex;"><span>(setq global-auto-revert-non-file-buffers <span style="color:#66d9ef">t</span>)
</span></span><span style="display:flex;"><span>(setq auto-revert-verbose <span style="color:#66d9ef">nil</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Automatically reload files was modified by external program.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; https://www.emacswiki.org/emacs/AutoRevertMode</span>
</span></span><span style="display:flex;"><span>(global-auto-revert-mode <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Make URLs in comments/strings clickable, (Emacs &gt; v22).</span>
</span></span><span style="display:flex;"><span>(add-hook <span style="color:#e6db74">&#39;find-file-hooks</span> <span style="color:#e6db74">&#39;goto-address-prog-mode</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Display fringe indicators in `visual-line-mode`.</span>
</span></span><span style="display:flex;"><span>(setq visual-line-fringe-indicators <span style="color:#f92672">&#39;</span>(left-curly-arrow right-curly-arrow))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Switching the focus to the help window when it&#39;s opened.</span>
</span></span><span style="display:flex;"><span>(setq help-window-select <span style="color:#66d9ef">t</span>)
</span></span></code></pre></div><h3 id="frame-title">Frame title</h3>
<p>Template for displaying the title bar of visible frames.
(Assuming the window manager supports this feature.)</p>
<p>This variable has the same structure as <code>mode-line-format</code>, except that
the %c, %C, and %l constructs are ignored.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Frame title.</span>
</span></span><span style="display:flex;"><span>(setq frame-title-format <span style="color:#e6db74">&#34;%F--%b-[%f]--%Z&#34;</span>)
</span></span></code></pre></div><h3 id="electric-pair-mode">Electric Pair mode</h3>
<p>Electric Pair mode is a global minor mode. When enabled, typing an
open parenthesis automatically inserts the corresponding closing
parenthesis, and vice versa. (Likewise for brackets, etc.). If the
region is active, the parentheses (brackets, etc.) are inserted around
the region instead.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; Global.</span>
</span></span><span style="display:flex;"><span>(electric-pair-mode <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><h2 id="calendar-tweaks">Calendar tweaks</h2>
<p>If you want to be informed about the times of sunrise and sunset for
any date at your location, Emacs is always ready to lend a hand &ndash; you
just need to provide your coordinates to Emacs. Use one decimal place
in the values of <code>calendar-latitude</code> and <code>calendar-longitude</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(defvar calendar-latitude NN.N)
</span></span><span style="display:flex;"><span>(defvar calendar-longitude NN.N)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Number of minutes difference between local standard time and UTC.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; For example, -300 for New York City, -480 for Los Angeles.</span>
</span></span><span style="display:flex;"><span>(defvar calendar-time-zone NNN)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Optional, the default value is just the variable `calendar-latitude`</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; paired with the variable `calendar-longitude`.</span>
</span></span><span style="display:flex;"><span>(defvar calendar-location-name <span style="color:#e6db74">&#34;Your City, Your Country&#34;</span>)
</span></span></code></pre></div><p>Within the calendar, the following commands are available:</p>
<dl>
<dt><code>S</code></dt>
<dd>Display times of sunrise and sunset for the selected date (<code>calendar-sunrise-sunset</code>).</dd>
<dt><code>M-x sunrise-sunset</code></dt>
<dd>Display times of sunrise and sunset for today&rsquo;s date.</dd>
<dt><code>C-u M-x sunrise-sunset</code></dt>
<dd>Display times of sunrise and sunset for a specified date.</dd>
<dt><code>M-x calendar-sunrise-sunset-month</code></dt>
<dd>Display times of sunrise and sunset for the selected month.</dd>
</dl>
<p>The command <code>M-x sunrise-sunset</code> is also available outside the
calendar to display the sunrise and sunset information for today&rsquo;s
date in the echo area.</p>
<h3 id="some-other-calendar-tweaks">Some other Calendar tweaks</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span><span style="color:#75715e">;; First day of the week: 0:Sunday, 1:Monday.</span>
</span></span><span style="display:flex;"><span>(defvar calendar-week-start-day <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">;; Use European date format (DD/MM/YYYY or 9 October 2024).</span>
</span></span><span style="display:flex;"><span>(defvar calendar-date-style <span style="color:#e6db74">&#39;european</span>)
</span></span></code></pre></div><p>To be continued. Happy emacsing!</p>
	</div>
</article>
</main>

<div class="pagination">
	<span class="pagination__item pagination__item--current">1/2</span>
	<a class="pagination__item pagination__item--next btn" href="/tags/config/page/2/">»</a>
</div>

			</div>
			
<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://duckduckgo.com/">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH…" value="" name="q" aria-label="SEARCH…">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sites" value="https://olddeuteronomy.github.io/"/>
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/post/elfeed-optimized-blogging/">Elfeed-optimized Blogging</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/orgmode-for-reproducibility-testing/">Using Emacs Org Mode for Reproducibility Testing</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/cpp-programming-in-emacs/">C&#43;&#43; Programming in Emacs</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/python-programming-in-emacs/">Python Programming in Emacs</a></li>
			<li class="widget__item"><a class="widget__link" href="/post/emacs-startup-screen/">Emacs Startup Screen</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/blog/" title="Blog">Blog</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/c&#43;&#43;/" title="C&#43;&#43;">C&#43;&#43;</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/calc/" title="Calc">Calc</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/config/" title="Config">Config</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/elfeed/" title="Elfeed">Elfeed</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/elisp/" title="Elisp">Elisp</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/emacs/" title="Emacs">Emacs</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/eshell/" title="Eshell">Eshell</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/org-mode/" title="Org-Mode">Org-Mode</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/packages/" title="Packages">Packages</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/pages/" title="Pages">Pages</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/python/" title="Python">Python</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/snippets/" title="Snippets">Snippets</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/social/" title="Social">Social</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/tree-sitter/" title="Tree-Sitter">Tree-Sitter</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/writing/" title="Writing">Writing</a>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/2017/">2017</a>&nbsp;
				<span class="widget__counter widget__counter--bubble">1</span>
				</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/2022/">2022</a>&nbsp;
				<span class="widget__counter widget__counter--bubble">8</span>
				</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/2023/">2023</a>&nbsp;
				<span class="widget__counter widget__counter--bubble">1</span>
				</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/2024/">2024</a>&nbsp;
				<span class="widget__counter widget__counter--bubble">5</span>
				</li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/2025/">2025</a>&nbsp;
				<span class="widget__counter widget__counter--bubble">3</span>
				</li>
		</ul>
	</div>
</div>
<div class="widget-social widget">
	<h4 class="widget-social__title widget__title">Social</h4>
	<div class="widget-social__content widget__content">
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="GitHub" rel="noopener noreferrer" href="https://github.com/olddeuteronomy" target="_blank">
				<svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0c-106.1 0-192 85.8-192 191.7 0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2 0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8 0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7 0 0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4 0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5 0 25.6-.2 46.3-.2 52.6 0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg>
				<span>GitHub</span>
			</a>
		</div>

		
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="X" rel="noopener noreferrer" href="https://x.com/ODeuteronomy" target="_blank">
					<svg class="widget-social__link-icon icon icon-rss" width="24" height="24" viewBox="0 0 24 24"><path d="M14.095479,10.316482L22.286354,1h-1.940718l-7.115352,8.087682L7.551414,1H1l8.589488,12.231093L1,23h1.940717  l7.509372-8.542861L16.448587,23H23L14.095479,10.316482z M11.436522,13.338465l-0.871624-1.218704l-6.924311-9.68815h2.981339  l5.58978,7.82155l0.867949,1.218704l7.26506,10.166271h-2.981339L11.436522,13.338465z"/></svg>

				<span>X</span>
			</a>
		</div>
		
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="Bluesky" rel="noopener noreferrer" href="https://bsky.app/profile/olddeuteronomy.bsky.social" target="_blank">
					<svg class="widget-social__link-icon icon icon-rss" width="24" height="24" viewBox="0 -3.268 64 68.414"><path d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"/></svg>
				<span>Bluesky</span>
			</a>
		</div>
		
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="Mastodon" rel="noopener noreferrer" href="https://mastodon.social/@olddeuteronomy" target="_blank">
					<svg class="widget-social__link-icon icon icon-rss" width="24" height="24" viewBox="0 0 24 24"><path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/></svg>

				<span>Mastodon</span>
			</a>
		</div>
		
		<div class="widget-social__item widget__item">
			<a class="widget-social__link widget__link btn" title="RSS" rel="noopener noreferrer" href="https://olddeuteronomy.github.io/index.xml" target="_blank">
					<svg class="widget-social__link-icon icon icon-rss" width="24" height="24" viewBox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>

				<span>RSS</span>
			</a>
		</div>
		
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2025 The Emacs Cat.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
